<!-- # CE - fluxnova-bpm-webapp/webapp/src/main/resources-plugin/base/app/views/processInstance/jobs-tab.html -->

<div
  fxn-widget-loader
  loading-state="{{ loadingState }}"
  text-empty="{{ 'PLUGIN_JOBS_NO_JOBS' | translate }}"
>
  <table class="jobs-tab fxn-table">
    <thead
      sortable-table-head
      head-columns="headColumns"
      on-sort-change="onSortChange(sortObj)"
      default-sort="sorting"
    ></thead>

    <tbody>
      <tr ng-repeat="job in jobs">
        <td class="id">
          <span fxn-widget-clipboard="job.id">{{job.id}}</span>
        </td>
        <td class="date">
          <span ng-if="job.dueDate" fxn-widget-clipboard="job.dueDate | fxnDate"
            >{{job.dueDate | fxnDate}}</span
          >
          <span ng-if="!job.dueDate" class="null-value">null</span>
        </td>
        <td>
          <span fxn-widget-clipboard="job.createTime | fxnDate"
            >{{job.createTime | fxnDate}}</span
          >
        </td>
        <td>
          {{job.retries}}
        </td>
        <td>
          <a
            ng-href="#/process-instance/{{ processInstance.id }}/runtime?activityIds={{job.activityId}}&amp;tab=jobs-tab"
          >
            {{job.activityName}}
          </a>
        </td>
        <td>
          <span
            ng-if="job.failedActivityId"
            fxn-widget-clipboard="job.failedActivityId"
          >
            {{ job.failedActivityName }}
          </span>
        </td>
        <td>
          <a
            class="btn btn-sm btn-default action-button"
            ng-click="toggleSuspension(job)"
            ng-if="job.suspended"
            uib-tooltip="{{ 'PLUGIN_JOBS_RESUME_TOOLTIP' | translate }}"
            tooltip-placement="left"
          >
            <span class="glyphicon glyphicon-play"></span>
          </a>
          <a
            class="btn btn-sm btn-default action-button"
            ng-click="toggleSuspension(job)"
            ng-if="!job.suspended"
            uib-tooltip="{{ 'PLUGIN_JOBS_SUSPEND_TOOLTIP' | translate }}"
            tooltip-placement="left"
          >
            <span class="glyphicon glyphicon-pause"></span>
          </a>
          <a
            class="btn btn-sm btn-default action-button"
            ng-click="openRecalculationWindow(job)"
            ng-if="job.dueDate"
            uib-tooltip="{{ 'PLUGIN_JOB_RECALCULATE_TOOLTIP' | translate }}"
            tooltip-placement="left"
          >
            <span class="glyphicon glyphicon-time"></span>
          </a>
        </td>
      </tr>
    </tbody>
  </table>

  <div fxn-pagination="onPaginationChange(pages)" total="pages.total"></div>
</div>
<!-- / CE - fluxnova-bpm-webapp/webapp/src/main/resources-plugin/base/app/views/processInstance/jobs-tab.html -->
